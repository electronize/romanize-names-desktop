<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
      <title>羅馬拼音查詢</title>
      <link rel="stylesheet" type="text/css" href="../public/stylesheets/semantic.min.css">
      <style type="text/css">
        body {
          background-color: #DADADA;
        }
        body > .grid {
          height: 100%;
        }
        .image {
          margin-top: -100px;
        }
        .column {
          max-width: 450px;
        }
      </style>
  </head>
  <body>


    <div class="ui middle aligned center aligned grid">
      <div class="column">
        <h2 class="ui teal image header">
          <img src="../public/images/name-tag.svg" class="image">
          <div class="content">
            姓名拼音轉換
          </div>
        </h2>
        <form class="ui large form">
          <div class="ui stacked segment">

            <div class="ui right action left icon input">
              <i class="paragraph icon"></i>
              <input type="text" placeholder="輸入姓名" id="input">
              <div class="ui dropdown button">
                <div class="text">拼音系統</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                  <div class="item">WG (default)</div>
                  <div class="item">MPS-II</div>
                  <div class="item">HANYU</div>
                </div>
              </div>
            </div>

            <!-- <div class="ui fluid large teal submit button">Login</div> -->
          </div>

          <div class="ui error message"></div>
          <div id="output"></div>

        </form>


      </div>
    </div>

    <script type="text/javascript">
      window.$ = window.jQuery = require('../public/javascripts/jquery-2.1.4.min.js');
    </script>

    <!-- Semantic Dependencies -->
    <script src="../public/javascripts/semantic.min.js"></script>

    <script type="text/javascript">
      var romanize = require('romanize-names');
      var valToSystem = {
        'wg (default)': 'WG',
        'mps-ii': 'MPS-II',
        'hanyu': 'HANYU'
      };
      var system = 'WG';

      function isDigit(value) {
        var patrn = /^[0-9]*$/;
        if (patrn.exec(value) == null || value == "") {
          return false
        } else {
          return true
        }
      }
      function isAlpha(value) {
        if(/^[ a-z]+$/i.test(value)){
          return true
        } else {
          return false
        }
      }


      $('.dropdown').dropdown({
        onChange: function (val) {
          console.log((valToSystem[val]));
          system = valToSystem[val];
          $('#output').html(romanize($('#input').val(), system));
        }
      });

      $('#input').bind('input propertychange', function() {
        if (isDigit(this.value)) {
          console.log('isDigit');
          return
        } else if (isAlpha(this.value)) {
          console.log('isAlpha');
          return
        }
        $('#output').html(romanize(this.value, system));
      });

    </script>

  </body>
</html>
