var uv=function(){var t={};return t.util={},t.util.inherits=function(t){function e(){}return e.prototype=t.prototype||t,new e},t.util.getUniqueId=function(){return(new Date).getTime()},t.util.getMaxValue=function(t){return d3.max(t.categories.map(function(e){return d3.max(t.dataset[e].map(function(t){return t.value}))}))},t.util.getStepMaxValue=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0});return t.categories.map(function(a){t.dataset[a].map(function(t,a){e[a]+=t.value})}),d3.max(e)},t.util.getWaterfallMaxValue=function(t){var e=t.categories.map(function(){return 0});return t.categories.map(function(a,r){var n=0;t.dataset[a].map(function(t){n+=t.value,e[r]<n&&(e[r]=n)})}),d3.max(e)},t.util.getSumUpArray=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0});return t.categories.map(function(a){t.dataset[a].map(function(t,a){e[a]+=t.value})}),e},t.util.getPercentage=function(t,e){return 100*t/e},t.util.getDataArray=function(t){return t.categories.map(function(e){return t.dataset[e]})},t.util.getTabularArray=function(t){var e,a,r,n,o=[],s=[];for(e=0,n=t.dataset[t.categories[0]].length;n>e;e+=1){for(s=[],s.push(t.dataset[t.categories[0]][e].name),a=0,r=t.categories.length;r>a;a+=1)s.push(t.dataset[t.categories[a]][e].value);o.push(s)}return o},t.util.getLabelArray=function(t,e){return t.dataset[t.categories[e?e:0]].map(function(t){return t.name})},t.util.getCategoryArray=function(t){return t.categories.map(function(t){return t})},t.util.getCategoryData=function(t,e){return e.map(function(e){return t.dataset[e].map(function(t){return t.value})})},t.util.transposeData=function(t){var e,a,r,n,o,s,i,l={},c=t.dataset[t.categories[0]].map(function(t){return t.name});for(e=0,r=c.length;r>e;e+=1)l[c[e]]=[];for(e=0,r=t.categories.length;r>e;e+=1)for(o=t.categories[e],a=0,n=t.dataset[o].length;n>a;a+=1)s=t.dataset[o][a].name,i=t.dataset[o][a].value,l[s].push({name:o,value:i});t.categories=c,t.dataset=l},t.util.getPascalCasedName=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},t.util.getColorBand=function(e,a){{var r=0;e.graph.palette||"Default"}return e.graph.custompalette&&0!==e.graph.custompalette.length?(r=e.graph.custompalette.length,e.graph.custompalette[a%r]):(r=t.palette[e.graph.palette].length,t.palette[e.graph.palette][a%r])},t.util.formatClassName=function(t){var e=t.trim().replace(/[^A-Za-z0-9_\-]/g,"-").toLowerCase();return e},t.util.svgToPng=function(t,e){if(this.isCanvasSupported()){var a=d3.select(t.frame.node().parentNode).html(),r=document.createElement("canvas"),n=r.getContext("2d");r.setAttribute("width",d3.select(t.frame.node()).attr("width")),r.setAttribute("height",d3.select(t.frame.node()).attr("height")),n.drawSvg(a),r.toBlob(function(t){saveAs(t,"png_download"+Math.ceil(1e5*Math.random())+".png")},"image/png"),e.call()}else console.log("this feature is not supported in this version of browser")},t.util.isDownloadSupported=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return"function"==typeof e.drawSvg&&"function"==typeof t.toBlob},t.util.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},t.util.endAll=function(t,e){var a=0;t.each(function(){++a}).each("end",function(){--a||e.apply(this,arguments)})},t.util.getClassName=function(e,a){var r=t.util.formatClassName(a);return d3.select(e).attr("class")?-1!==d3.select(e).attr("class").split(" ").indexOf(r)?d3.select(e).attr("class"):d3.select(e).attr("class")+" "+r:r},t.util.getLabelValue=function(t,e){var a=e.value%1===0?e.value:e.value.toFixed(t.config.label.precision);return t.config.label.prefix+String(a)+t.config.label.suffix},t.util._deepClone=function(e,a){if("object"==typeof a){var r=!0;for(var n in a)r=!1,a.hasOwnProperty(n)&&(void 0===e&&(e=Array.isArray(a)?[]:{}),e[n]=t.util._deepClone(e[n],a[n]));r&&(e=Array.isArray(a)?[]:{})}else e=a;return e},t.util.extend=function(){if(void 0===arguments[0]||null===arguments[0])return arguments[0];for(var e=1;e<arguments.length;e++)for(var a in arguments[e])arguments[e].hasOwnProperty(a)&&(arguments[0][a]=t.util._deepClone(arguments[0][a],arguments[e][a]));return arguments[0]},t.util.getTooltipText=function(e,a,r,n){if(!e.config.tooltip.show)return"";var o=e.config.tooltip.format;return""===o?a+" ["+r+"] : "+t.util.getLabelValue(n):o.replace(/%c/gi,a).replace(/%l/gi,r).replace(/%v/gi,t.util.getLabelValue(e,n))},t.config={graph:{palette:"Default",bgcolor:"#FFFFFF",orientation:"Horizontal",max:0,custompalette:[],opacity:1,responsive:!1,align:"xMinYMin",meetOrSlice:"meet"},meta:{position:"#uv-div",caption:"",subcaption:"",hlabel:"",vlabel:"",hsublabel:"",vsublabel:"",isDownloadable:!1,downloadLabel:"Download"},dimension:{width:400,height:400},margin:{top:50,bottom:150,left:100,right:100},frame:{bgcolor:"#FFFFFF"},axis:{ticks:8,subticks:2,padding:5,minor:-10,strokecolor:"#000000",fontfamily:"Arial",fontsize:"14",fontweight:"bold",showticks:!0,showsubticks:!0,showtext:!0,showhortext:!0,showvertext:!0,opacity:.1},label:{fontfamily:"Arial",fontsize:"11",fontweight:"normal",strokecolor:"#000000",showlabel:!0,precision:2,prefix:"",suffix:""},tooltip:{show:!0,format:"%c [%l] : %v"},scale:{type:"linear",ordinality:.2},bar:{strokecolor:"none",fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000"},line:{interpolation:"linear",showcircles:!0},area:{interpolation:"cardinal",offset:"zero",opacity:.2},pie:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFFF",strokecolor:"#FFFFFF",strokewidth:1},donut:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#000",factor:.4,strokecolor:"#FFFFFF",strokewidth:1},caption:{fontfamily:"Arial",fontsize:"14",fontweight:"bold",fontvariant:"small-caps",textdecoration:"none",hovercolor:"#696969",strokecolor:"#0000FF",textanchor:"middle",cursor:"pointer"},subCaption:{fontfamily:"Arial",fontsize:"9",fontweight:"normal",fontvariant:"normal",textdecoration:"none",textanchor:"middle"},legend:{position:"bottom",fontfamily:"Arial",fontsize:"11",fontweight:"normal",color:"#000000",strokewidth:.15,textmargin:15,symbolsize:10,inactivecolor:"#DDD",legendstart:0,legendtype:"categories",showlegends:!0},effects:{hovercolor:"#FF0000",strokecolor:"none",textcolor:"#000000",duration:800,hover:400,showhovertext:!1}},t.constants={},t.constants.classes={uv:"uv",pos:"uv-div",frame:"uv-frame",panel:"uv-panel",bg:"uv-chart-bg",chart:"uv-chart",axes:"uv-axes",legend:"uv-legend",framebg:"uv-frame-bg",horaxis:"uv-hor-axis",veraxis:"uv-ver-axis",caption:"uv-caption",captiontext:"uv-caption-text",subcaption:"uv-subcaption",subcaptiontext:"uv-subcaption-text",axeslabelgroup:"uv-axes-label-group",axeslabel:"uv-axes-label",axessublabel:"uv-axes-sub-label",legendsign:"uv-legend-sign",legendlabel:"uv-legend-label",hoverbg:"uv-hover-bg",arc:"uv-arc-",areapath:"uv-areapath-",linepath:"uv-linepath-",area:"uv-area-",line:"uv-line-",dot:"uv-dot",chartdiv:"uv-chart-div",circleticks:"circle-ticks",download:"uv-download-options"},t.constants.downloads={downloadLabel:"Download"},t.types={},t.addChart=function(e,a){t.types[e]=a},t.addChart("Bar","BarGraph"),t.addChart("Line","LineGraph"),t.addChart("StackedBar","StackedBarGraph"),t.addChart("StepUpBar","StepUpBarGraph"),t.addChart("Area","AreaGraph"),t.addChart("StackedArea","StackedAreaGraph"),t.addChart("PercentBar","PercentBarGraph"),t.addChart("PercentArea","PercentAreaGraph"),t.addChart("Pie","PieGraph"),t.addChart("Donut","DonutGraph"),t.addChart("Waterfall","WaterfallGraph"),t.addChart("StepUpWaterfall","StepupWaterfallGraph"),t.addChart("PolarArea","PolarAreaGraph"),t.chart=function(e,a,r){return void 0!==t.types[e]?new t[t.types[e]](a,r):void 0},t.effects={},t.effects.bar={},t.effects.bar.mouseover=function(e,a){var r=e.config,n=e.categories[a],o=e.labels[a],s=function(){e.frame.selectAll("rect.cr-"+t.util.formatClassName(n)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("stroke",r.effects.strokecolor),r.effects.showhovertext&&e.frame.selectAll("text.cr-"+t.util.formatClassName(n)).transition().duration(r.effects.hover).style("fill",r.effects.textcolor).style("opacity",1)};return"categories"===r.legend.legendtype?e.effects[n].mouseover=s:e.effects[o].mouseover=s,s},t.effects.bar.mouseout=function(e,a,r){var n=e.config,o=e.categories[a],s=t.util.getColorBand(e.config,a),i=r||t.util.getColorBand(e.config,a),l=e.labels[a],c=function(){e.frame.selectAll("rect.cr-"+t.util.formatClassName(o)).transition().duration(n.effects.hover).style("fill",s).style("stroke","none"),e.frame.selectAll("text.cr-"+t.util.formatClassName(o)).transition().duration(n.effects.hover).style("fill",e.config.label.showlabel?i:"none")};return"categories"===n.legend.legendtype?e.effects[o].mouseout=c:e.effects[l].mouseout=c,c},t.effects.area={},t.effects.area.mouseover=function(e,a){var r=e.config,n=e.categories[a],o=function(){e.frame.selectAll(".cge-"+t.util.formatClassName(n)).select("path."+t.constants.classes.area+t.util.formatClassName(n)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor)};return e.effects[n].mouseover=o,o},t.effects.area.mouseout=function(e,a){var r=e.config,n=e.categories[a],o=function(){e.frame.selectAll(".cge-"+t.util.formatClassName(n)).select("path."+t.constants.classes.area+t.util.formatClassName(n)),e.frame.selectAll(".cge-"+t.util.formatClassName(n)).select("path."+t.constants.classes.area+t.util.formatClassName(n)).transition().duration(r.effects.hover).style("fill",t.util.getColorBand(r,a))};return e.effects[n].mouseout=o,o},t.effects.line={},t.effects.line.mouseover=function(e,a){var r=e.config,n=e.categories[a],o=function(){e.frame.selectAll(".cge-"+t.util.formatClassName(n)).selectAll("circle").transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("fill-opacity",1).style("stroke",r.effects.hovercolor),e.frame.selectAll(".cge-"+t.util.formatClassName(n)).select("path").transition().duration(r.effects.hover).style("stroke",r.effects.hovercolor),r.effects.showhovertext&&e.frame.selectAll(".cge-"+t.util.formatClassName(n)).selectAll("text").transition().duration(r.effects.hover).style("fill",r.effects.textcolor)};return e.effects[n].mouseover=o,o},t.effects.line.mouseout=function(e,a,r){var n=e.config,o=e.categories[a],s=r||t.util.getColorBand(e.config,a),i=function(){e.frame.selectAll(".cge-"+t.util.formatClassName(o)).selectAll("circle").transition().duration(n.effects.hover).style("fill",s).style("fill-opacity",.6).style("stroke","#fff"),e.frame.selectAll(".cge-"+t.util.formatClassName(o)).select("path").transition().duration(n.effects.hover).style("stroke",s),e.frame.selectAll(".cge-"+t.util.formatClassName(o)).selectAll("text").transition().duration(n.effects.hover).style("fill",e.config.label.showlabel?s:"none")};return e.effects[o].mouseout=i,i},t.effects.caption={},t.effects.caption.mouseover=function(e){return function(){d3.select(this.parentNode.parentNode).select("."+t.constants.classes.hoverbg).transition().duration(e.effects.duration).style("fill",e.caption.hovercolor)}},t.effects.caption.mouseout=function(e){return function(){d3.select(this.parentNode.parentNode).select("."+t.constants.classes.hoverbg).transition().duration(e.effects.duration).style("fill",e.graph.bgcolor)}},t.effects.donut={},t.effects.donut.mouseover=function(t,e,a,r){return function(r){var n={x:e.centroid(r)[0]/5,y:e.centroid(r)[1]/5};d3.select(this.parentNode).transition().duration(a.effects.duration).attr("transform","translate("+(t.x+n.x)+","+(t.y+n.y)+")")}},t.effects.donut.mouseout=function(t,e){return function(){d3.select(this.parentNode).transition().duration(e.effects.duration).attr("transform","translate("+t.x+","+t.y+")")}},t.effects.pie={},t.effects.pie.mouseover=function(t,e,a,r){var n=function(t){var n={x:a.centroid(t)[0]/5,y:a.centroid(t)[1]/5};d3.select(this.parentNode).transition().duration(r.effects.duration).attr("transform","translate("+(e.x+n.x)+","+(e.y+n.y)+")")};return n},t.effects.pie.mouseout=function(t,e,a){var r=function(){d3.select(this.parentNode).transition().duration(a.effects.duration).attr("transform","translate("+e.x+","+e.y+")")};return r},t.effects.legend={},t.effects.legend.mouseover=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseover:t.effects.group[t.labels[e]].mouseover},t.effects.legend.mouseout=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseout:t.effects.group[t.labels[e]].mouseout},t.effects.legend.click=function(e,a,r){var n="false"===d3.select(a).attr("disabled")?!1:!0;r.toggleGraphGroup(e),d3.select(a).select("rect").style("fill",n?t.util.getColorBand(r.config,e):t.config.legend.inactivecolor),d3.select(a).select("text").style("fill",n?null:t.config.legend.inactivecolor),d3.select(a).attr("disabled",n?"false":"true")},t.palette={Default:["#7E6DA1","#C2CF30","#FF8900","#FE2600","#E3003F","#8E1E5F","#FE2AC2","#CCF030","#9900EC","#3A1AA8","#3932FE","#3276FF","#35B9F6","#42BC6A","#91E0CB"],Plain:["#B1EB68","#B1B9B5","#FFA16C","#9B64E7","#CEE113","#2F9CFA","#CA6877","#EC3D8C","#9CC66D","#C73640","#7D9532","#B064DC"],Android:["#33B5E5","#AA66CC","#99CC00","#FFBB33","#FF4444","#0099CC","#9933CC","#669900","#FF8800","#CC0000"],Soft:["#9ED8D2","#FFD478","#F16D9A","#A8D59D","#FDC180","#F05133","#EDED8A","#F6A0A5","#9F218B"],Simple:["#FF8181","#FFB081","#FFE081","#EFFF81","#BFFF81","#90FF81","#81FFA2","#81FFD1","#9681FF","#C281FF","#FF81DD"],Egypt:["#3A3E04","#784818","#FCFCA8","#C03C0C","#F0A830","#A8783C","#FCFCFC","#FCE460","#540C00","#C0C084","#3C303C","#1EA34A","#606C54","#F06048"],Olive:["#18240C","#3C6C18","#60A824","#90D824","#A8CC60","#789C60","#CCF030","#B4CCA8","#D8F078","#40190D","#E4F0CC"],Candid:["#AF5E14","#81400C","#E5785D","#FEBFBF","#A66363","#C7B752","#EFF1A7","#83ADB7","#528F98","#BCEDF5","#446B3D","#8BD96F","#E4FFB9"],Sulphide:["#594440","#0392A7","#FFC343","#E2492F","#007257","#B0BC4A","#2E5493","#7C2738","#FF538B","#A593A1","#EBBA86","#E2D9CA"],Lint:["#A8A878","#F0D89C","#60909C","#242418","#E49C30","#54483C","#306090","#C06C00","#C0C0C0","#847854","#6C3C00","#9C3C3C","#183C60","#FCCC00","#840000","#FCFCFC"]},t.Graph=function(e,a){var r=this;return r.id=t.util.getUniqueId(),r.graphdef=null,r.config=null,r.frame=null,r.panel=null,r.chart=null,r.bg=null,r.effects={},r.axes={hor:{group:null,scale:null,func:null,axis:null,line:null,label:null},ver:{group:null,scale:null,func:null,axis:null,line:null,label:null}},r.labels=null,r.categories=null,r.graphdef=e,r.config=t.util.extend({},t.config,a),this},t.Graph.prototype.init=function(){var t=this;return t.setMax(t.graphdef.stepup).position(t.config.meta.position||"body").setDimensions().setFrame().setPanel().setBackground().setCaption().setSubCaption().setMetadata().setHorizontalAxis().setVerticalAxis().setEffectsObject(),t.config.meta.isDownloadable&&t.setDownloadOptions(),t.config.legend.showlegends&&t.setLegend(),t},t.Graph.prototype.setDimensions=function(){var t=this;return t.height(t.config.dimension.height).width(t.config.dimension.width).top(t.config.margin.top).bottom(t.config.margin.bottom).left(t.config.margin.left).right(t.config.margin.right),this},t.Graph.prototype.setDownloadOptions=function(){if(t.util.isDownloadSupported()){var e=this;e.download=e.panel.append("g").classed(t.constants.classes.download,!0),e.download.append("text").classed(t.constants.classes.download,!0).text(e.config.meta.downloadLabel).attr("y",-e.config.margin.top/2).attr("x",e.config.dimension.width-25).attr("text-anchor",e.config.caption.textanchor).style("font-family",e.config.caption.fontfamily).style("font-size","12").style("cursor",e.config.caption.cursor).style("stroke",e.config.caption.strokecolor).style("text-decoration","underline").on("mouseover",function(){var t=d3.select(this);t.style("color","#0000FF")}).on("mouseout",function(){var t=d3.select(this);t.style("color","#8D8D8D")}).on("click",function(){var a=d3.select(this);a.style("display","none"),t.util.svgToPng(e,function(){a.style("display",null)})})}},t.Graph.prototype.setFrame=function(){var e=this;return e.frame||(e.frame=d3.select(e.position()||"body").append("div").classed(t.constants.classes.chartdiv,!0).style("display","inline-block").style("width","100%").style("height","100%").append("svg")),e.frame.attr("id",t.constants.classes.uv+"-"+e.id).classed(t.constants.classes.frame,!0),e.config.graph.responsive===!0?e.frame.attr("width","100%").attr("height","100%").attr("preserveAspectRatio",e.config.graph.align+" "+e.config.graph.meetOrSlice).attr("viewBox","0 0 "+(e.width()+e.left()+e.right())+" "+(e.height()+e.top()+e.bottom())):e.frame.attr("width",e.width()+e.left()+e.right()).attr("height",e.height()+e.top()+e.bottom()),e.frame.append("rect").classed(t.constants.classes.framebg,!0).attr("width",e.width()+e.left()+e.right()).attr("height",e.height()+e.top()+e.bottom()).style("fill",e.config.frame.bgcolor),this},t.Graph.prototype.setPanel=function(){var e=this;return e.panel||(e.panel=e.frame.append("g")),e.panel.attr("id",t.constants.classes.panel+"-"+e.id).classed(t.constants.classes.panel,!0).attr("transform","translate("+e.left()+","+e.top()+")"),this},t.Graph.prototype.setBackground=function(e){var a=this;return a.bg||(a.bg=a.panel.append("rect").classed(t.constants.classes.bg,!0).attr("height",a.height()).attr("width",a.width())),a.bg.style("fill",e||a.config.graph.bgcolor),a.chart=a.panel.append("g").classed(t.constants.classes.chart,!0).style("opacity",a.config.graph.opacity),this},t.Graph.prototype.setCaption=function(){var e=this;return e.caption=e.panel.append("g").classed(t.constants.classes.caption,!0),e.caption.append("text").classed(t.constants.classes.captiontext,!0).text(e.config.meta.caption).attr("y",-e.config.margin.top/2).attr("x",e.config.dimension.width/2).attr("text-anchor",e.config.caption.textanchor).style("font-family",e.config.caption.fontfamily).style("font-size",e.config.caption.fontsize).style("font-weight",e.config.caption.fontweight).style("font-variant",e.config.caption.fontvariant).style("text-decoration",e.config.caption.textdecoration).on("mouseover",t.effects.caption.mouseover(e.config)).on("mouseout",t.effects.caption.mouseout(e.config)),this},t.Graph.prototype.setSubCaption=function(){var e=this;return e.subCaption=e.panel.append("g").classed(t.constants.classes.subcaption,!0),e.subCaption.append("text").classed(t.constants.classes.subcaptiontext,!0).text(e.config.meta.subcaption).attr("y",-e.config.margin.top/2+1*e.config.caption.fontsize).attr("x",e.config.dimension.width/2).attr("text-anchor",e.config.caption.textanchor).style("font-family",e.config.subCaption.fontfamily).style("font-size",e.config.subCaption.fontsize).style("font-weight",e.config.subCaption.fontweight).style("font-variant",e.config.subCaption.fontvariant).style("text-decoration",e.config.subCaption.textdecoration),this},t.Graph.prototype.setMetadata=function(){var e=this;return e.labels=t.util.getLabelArray(e.graphdef),e.categories=t.util.getCategoryArray(e.graphdef),this},t.Graph.prototype.setHorizontalAxis=function(){{var e=this;e.graphdef}return e.axes.hor.group||(e.axes.hor.group=e.panel.append("g").classed(t.constants.classes.horaxis,!0).attr("transform","translate(0,"+e.height()+")").style("shape-rendering","crispEdges")),"Horizontal"===e.config.graph.orientation?(e.axes.hor.scale=d3.scale[e.config.scale.type]().domain(["log"===e.config.scale.type?1:0,e.max()]).range([0,e.width()]),e.axes.hor.scale.nice&&e.axes.hor.scale.nice(),e.config.axis.showsubticks||(e.config.axis.subticks=0),e.axes.hor.func=d3.svg.axis().scale(e.axes.hor.scale).ticks(e.config.axis.ticks).tickSize(-e.height(),e.config.axis.minor,0).tickPadding(e.config.axis.padding).tickSubdivide(e.config.axis.subticks).orient("bottom")):(e.axes.hor.scale=d3.scale.ordinal().rangeRoundBands([0,e.width()],e.config.scale.ordinality),e.axes.hor.func=d3.svg.axis().scale(e.axes.hor.scale).tickPadding(e.config.axis.padding).orient("bottom"),e.config.axis.showtext&&e.config.axis.showhortext||e.axes.hor.func.tickSize(0)),e.config.axis.showtext&&e.config.axis.showhortext||e.axes.hor.func.tickFormat(function(t){return""}),this},t.Graph.prototype.setVerticalAxis=function(){{var e=this;e.graphdef}return e.axes.ver.group||(e.axes.ver.group=e.panel.append("g").classed(t.constants.classes.veraxis,!0).style("shape-rendering","crispEdges")),"Vertical"===e.config.graph.orientation?(e.axes.ver.scale=d3.scale[e.config.scale.type]().domain([e.max(),"log"===e.config.scale.type?1:0]).range([0,e.height()]),e.axes.ver.scale.nice&&e.axes.ver.scale.nice(),e.config.axis.showsubticks||(e.config.axis.subticks=0),e.axes.ver.func=d3.svg.axis().scale(e.axes.ver.scale).ticks(e.config.axis.ticks).tickSize(-e.width(),e.config.axis.minor,0).tickPadding(e.config.axis.padding).tickSubdivide(e.config.axis.subticks).orient("left")):(e.axes.ver.scale=d3.scale.ordinal().rangeRoundBands([0,e.height()],e.config.scale.ordinality),e.axes.ver.func=d3.svg.axis().scale(e.axes.ver.scale).tickPadding(e.config.axis.padding).orient("left"),e.config.axis.showtext&&e.config.axis.showvertext||e.axes.ver.func.tickSize(0)),e.config.axis.showtext&&e.config.axis.showvertext||e.axes.ver.func.tickFormat(function(t){return""}),this},t.Graph.prototype.setEffectsObject=function(){for(var t=this,e="categories"===t.config.legend.legendtype?t.categories:t.labels,a=0;a<e.length;a++)t.effects[e[a]]={};return t},t.Graph.prototype.drawHorizontalAxis=function(){var e=this;return e.axes.hor.axis=e.axes.hor.group.append("g").style("font-family",e.config.label.fontfamily).style("font-size",e.config.label.fontsize).style("font-weight",e.config.label.fontweight).call(e.axes.hor.func),e.config.axis.showticks&&e.axes.hor.axis.selectAll("line").style("stroke",e.config.axis.strokecolor).style("opacity",e.config.axis.opacity),e.axes.hor.axis.selectAll("path").style("fill","none"),e.axes.hor.line=e.panel.append("line").classed(t.constants.classes.horaxis,!0).attr("y1",e.height()).attr("y2",e.height()).attr("x1","0").attr("x2",e.width()).style("stroke",e.config.axis.strokecolor),e.axes.hor.label=e.axes.hor.group.append("g").classed(t.constants.classes.axeslabelgroup,!0).attr("transform","translate("+e.width()/2+","+(1*e.config.margin.bottom/4+1*e.config.label.fontsize)+")"),e.axes.hor.label.append("text").attr("display","block").classed(t.constants.classes.axeslabel,!0).classed("cal",!0).attr("text-anchor","middle").style("font-size",e.config.axis.fontsize).style("font-family",e.config.axis.fontfamily).text(e.config.meta.hlabel),e.axes.hor.label.append("text").attr("display","block").attr("y",1*e.config.axis.fontsize).attr(t.constants.classes.axessublabel,!0).classed("casl",!0).attr("text-anchor","middle").style("font-size",e.config.axis.fontsize-2).style("font-family",e.config.axis.fontfamily).text(e.config.meta.hsublabel),this},t.Graph.prototype.drawVerticalAxis=function(){var e=this;return e.axes.ver.axis=e.axes.ver.group.append("g").classed(t.constants.classes.axes,!0).style("font-family",e.config.label.fontfamily).style("font-size",e.config.label.fontsize).style("font-weight",e.config.label.fontweight).call(e.axes.ver.func),e.config.axis.showticks&&e.axes.ver.axis.selectAll("line").style("stroke",e.config.axis.strokecolor).style("opacity",e.config.axis.opacity),e.axes.ver.axis.selectAll("path").style("fill","none"),e.axes.ver.line=e.panel.append("line").classed(t.constants.classes.veraxis,!0).attr("y1",0).attr("y2",e.height()).style("stroke",e.config.axis.strokecolor),e.axes.ver.label=e.axes.ver.group.append("g").attr("transform","translate("+-4*e.config.margin.left/5+","+e.height()/2+")rotate(270)"),e.axes.ver.label.append("text").classed(t.constants.classes.axeslabel,!0).attr("text-anchor","middle").classed("cal",!0).style("font-family",e.config.axis.fontfamily).style("font-size",e.config.axis.fontsize).text(e.config.meta.vlabel),e.axes.ver.label.append("text").classed(t.constants.classes.axessublabel,!0).attr("text-anchor","middle").attr("y",+e.config.axis.fontsize).classed("casl",!0).style("font-family",e.config.axis.fontfamily).style("font-size",e.config.axis.fontsize-2).text(e.config.meta.vsublabel),this},t.Graph.prototype.setLegend=function(){var e=this,a=e.panel.append("g").classed(t.constants.classes.legend,!0).attr("transform",function(t,a){if("right"===e.config.legend.position)return"translate("+e.width()+", 10)";if("bottom"===e.config.legend.position){var r=e.height()+e.config.margin.bottom/2+Number(e.config.axis.fontsize);return"translate(0, "+r+")"}});return e.legends=a.selectAll("g").data("categories"===e.config.legend.legendtype?e.categories:e.labels),e.legends.enter().append("g").attr("transform",function(t,a){if("right"===e.config.legend.position)return"translate(10,"+10*(2*a-1)+")";if("bottom"===e.config.legend.position){var r=100*a-e.config.dimension.width*e.config.legend.legendstart,n=20*e.config.legend.legendstart;return r>=e.config.dimension.width&&(e.config.legend.legendstart=e.config.legend.legendstart+1,r=100*a-e.config.dimension.width*e.config.legend.legendstart,n=20*e.config.legend.legendstart),"translate("+r+","+n+")"}}).attr("class",function(a,r){var n="categories"===e.config.legend.legendtype?e.categories[r]:e.labels[r];return t.util.getClassName(this,"cl-"+n)}).attr("disabled","false").on("mouseover",function(t,a){e.effects[t].mouseover&&"function"==typeof e.effects[t].mouseover&&e.effects[t].mouseover()}).on("mouseout",function(t,a){e.effects[t].mouseout&&"function"==typeof e.effects[t].mouseout&&e.effects[t].mouseout()}).on("click",function(a,r){t.effects.legend.click(r,this,e)}),e.legends.append("rect").classed(t.constants.classes.legendsign,!0).attr("height",e.config.legend.symbolsize).attr("width",e.config.legend.symbolsize).style("fill",function(a,r){return t.util.getColorBand(e.config,r)}).style("stroke","none"),e.legends.append("text").classed(t.constants.classes.legendlabel,!0).text(function(t,a){return"categories"===e.config.legend.legendtype?e.categories[a]:e.labels[a]}).attr("dx",e.config.legend.textmargin).attr("dy",".71em").attr("text-anchor","start").style("stroke",e.config.legend.color).style("fill",e.config.legend.color).style("stroke-width",e.config.legend.strokewidth).style("font-family",e.config.legend.fontfamily).style("font-size",e.config.legend.fontsize).style("font-weight",e.config.legend.fontweight),this},t.Graph.prototype.finalize=function(t){var e=this;return e.drawHorizontalAxis().drawVerticalAxis(),e.frame.selectAll("text").style("cursor","default"),t&&console.log(e),this},t.Graph.prototype.remove=function(){return this.frame.remove(),this},t.Graph.prototype.removeCaption=function(){return this.caption.remove(),this},t.Graph.prototype.removeLegend=function(){return this.legends[0]&&this.legends[0].parentNode.remove(),this},t.Graph.prototype.removePanel=function(){return this.panel.remove(),this},t.Graph.prototype.removeHorAxis=function(){return this.panel.selectAll("g."+t.constants.classes.horaxis+" >*").remove(),this.panel.selectAll("line."+t.constants.classes.horaxis).remove(),this},t.Graph.prototype.removeVerAxis=function(){return this.panel.selectAll("g."+t.constants.classes.veraxis+" >*").remove(),this.panel.selectAll("line."+t.constants.classes.veraxis).remove(),this},t.Graph.prototype.width=function(t){return t?(this.config.dimension.width=t,this):this.config.dimension.width},t.Graph.prototype.height=function(t){return t?(this.config.dimension.height=t,this):this.config.dimension.height},t.Graph.prototype.top=function(t){return t?(this.config.margin.top=t,this):this.config.margin.top},t.Graph.prototype.bottom=function(t){return t?(this.config.margin.bottom=t,this):this.config.margin.bottom},t.Graph.prototype.left=function(t){return t?(this.config.margin.left=t,this):this.config.margin.left},t.Graph.prototype.right=function(t){return t?(this.config.margin.right=t,this):this.config.margin.right},t.Graph.prototype.position=function(t){return t?(this.config.meta.position=t,this):this.config.meta.position},t.Graph.prototype.caption=function(t){return t?(this.config.meta.caption=t,this):this.config.meta.caption},t.Graph.prototype.subCaption=function(t){return t?(this.config.meta.subCaption=t,this):this.config.meta.caption},t.Graph.prototype.isDownloadable=function(t){return t?(this.config.meta.isDownload=t,this):this.config.meta.isDownload},t.Graph.prototype.setMax=function(e){return 0!==this.config.graph.max?this:e===!0?(this.config.graph.max=t.util.getStepMaxValue(this.graphdef),this):e===!1?(this.config.graph.max=t.util.getMaxValue(this.graphdef),this):"percent"===e?(this.config.graph.max=100,this):"waterfall"===e?(this.config.graph.max=t.util.getWaterfallMaxValue(this.graphdef),this):this},t.Graph.prototype.max=function(){return this.config.graph.max},t.Graph.prototype.toggleGraphGroup=function(e){{var a=this,r=a.categories[e],n=a.frame.select("g.cge-"+t.util.formatClassName(r)).style("display");t.util.getColorBand(a.config,e)}return a.frame.selectAll("g.cge-"+t.util.formatClassName(r)).style("display","none"===n?null:"none"),this},t.AreaGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.areagroups=[],r.dataset=t.util.getDataArray(r.graphdef);var n,o,s,i,l=r.graphdef.dataset[r.graphdef.categories[0]];for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(l.map(function(t){return t.name})),s=0,i=r.dataset.length;i>s;s+=1)o=r.chart.append("g").classed("cg-"+t.util.formatClassName(r.categories[s]),!0).append("g").classed("cge-"+t.util.formatClassName(r.categories[s]),!0).datum(r.dataset[s]),n={path:o,linefunc:void 0,areafunc:void 0,line:void 0,area:void 0},r["draw"+r.config.graph.orientation+"Area"](n,s),r.areagroups.push(n);r.finalize()},t.AreaGraph.prototype=t.util.inherits(t.Graph),t.AreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,this},t.AreaGraph.prototype.drawHorizontalArea=function(e,a){var r=this,n=t.util.getColorBand(r.config,a);r.axes.ver.scale.rangePoints([0,r.height()]),e.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.value)}).y(function(t){return r.axes.ver.scale(t.name)+r.axes.ver.scale.rangeBand()/2}).interpolate(r.config.area.interpolation),e.areafunc=d3.svg.area().x0(r.axes.hor.scale(0)).x1(e.linefunc.x()).y(e.linefunc.y()).interpolate(r.config.area.interpolation),e.area=e.path.append("svg:path").classed(t.constants.classes.areapath+a,!0).attr("d",e.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",n),e.line=e.path.append("svg:path").classed(t.constants.classes.linepath+a,!0).attr("d",e.linefunc).style("stroke","white").style("fill","none"),e.path.selectAll("."+t.constants.classes.dot).data(r.dataset[a]).enter().append("circle").classed(t.constants.classes.dot,!0).attr("cx",e.linefunc.x()).attr("cy",e.linefunc.y()).attr("r",3.5).style("fill","white")},t.AreaGraph.prototype.drawVerticalArea=function(e,a){var r=this,n=t.util.getColorBand(r.config,a);r.axes.hor.scale.rangePoints([0,r.width()]),e.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.name)+r.axes.hor.scale.rangeBand()/2}).y(function(t){return r.axes.ver.scale(t.value)}).interpolate(r.config.area.interpolation),e.areafunc=d3.svg.area().x(e.linefunc.x()).y0(e.linefunc.y()).y1(r.axes.ver.scale(0)).interpolate(r.config.area.interpolation),e.area=e.path.append("svg:path").classed(t.constants.classes.areapath+a,!0).attr("d",e.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",n),e.line=e.path.append("svg:path").classed(t.constants.classes.linepath+a,!0).attr("d",e.linefunc).style("stroke","white").style("fill","none"),e.path.selectAll("."+t.constants.classes.dot).data(r.dataset[a]).enter().append("circle").classed(t.constants.classes.dot,!0).attr("cx",e.linefunc.x()).attr("cy",e.linefunc.y()).attr("r",3.5).style("fill","white")},t.BarGraph=function(e,a){
var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);var n,o,s=r.categories.length;for(n=0;s>n;n+=1)o=r.categories[n],r.bargroups[o]=r.chart.append("g").classed("cg-"+t.util.formatClassName(o),!0),r["draw"+r.config.graph.orientation+"Bars"](n);r.finalize()},t.BarGraph.prototype=t.util.inherits(t.Graph),t.BarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,this},t.BarGraph.prototype.drawHorizontalBars=function(e){var a=this,r=t.util.getColorBand(this.config,e),n=a.categories.length,o=a.bargroups[a.categories[e]].selectAll("g").data(a.graphdef.dataset[a.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(a.categories[e]),!0);o.append("rect").classed(t.util.formatClassName(a.categories[e]),!0).classed("cr-"+t.util.formatClassName(a.categories[e]),!0).attr("height",a.axes.ver.scale.rangeBand()/n).attr("x",0).attr("y",function(t){return a.axes.ver.scale(t.name)}).style("stroke",a.config.bar.strokecolor).style("fill",r).transition().duration(a.config.effects.duration).delay(function(t,e){return e*a.config.effects.duration}).attr("width",function(t){return a.axes.hor.scale(t.value)}).call(t.util.endAll,function(r,n){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(a,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(a,e))}),o.append("text").attr("y",function(t){return a.axes.ver.scale(t.name)+a.axes.ver.scale.rangeBand()/n/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+t.util.formatClassName(a.categories[e]),!0).style("fill",a.config.label.showlabel?t.util.getColorBand(a.config,e):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(e){return t.util.getLabelValue(a,e)}).transition().duration(a.config.effects.duration).delay(function(t,e){return e*a.config.effects.duration}).attr("x",function(t){return a.axes.hor.scale(t.value)}),o.append("svg:title").text(function(r,n){return t.util.getTooltipText(a,a.categories[e],a.labels[n],r)}),a.bargroups[a.categories[e]].attr("transform","translate(0,"+e*a.axes.ver.scale.rangeBand()/n+")")},t.BarGraph.prototype.drawVerticalBars=function(e){var a=this,r=t.util.getColorBand(this.config,e),n=a.categories.length,o=a.bargroups[a.categories[e]].selectAll("g").data(a.graphdef.dataset[a.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(a.categories[e]),!0);o.append("rect").classed(t.util.formatClassName(a.categories[e]),!0).classed("cr-"+t.util.formatClassName(a.categories[e]),!0).attr("height",0).attr("width",0).attr("x",function(t){return a.axes.hor.scale(t.name)}).attr("y",0).style("stroke",a.config.bar.strokecolor).style("fill",r).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("height",function(t){return a.height()-a.axes.ver.scale(t.value)}).attr("width",a.axes.hor.scale.rangeBand()/n).call(t.util.endAll,function(r,n){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(a,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(a,e))}),o.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return a.axes.hor.scale(t.name)+a.axes.hor.scale.rangeBand()/n/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(a.categories[e]),!0).style("fill",a.config.label.showlabel?t.util.getColorBand(a.config,e):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(e){return t.util.getLabelValue(a,e)}).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("y",function(t){return-(a.height()-a.axes.ver.scale(t.value))-10}),o.append("svg:title").text(function(r,n){return t.util.getTooltipText(a,a.categories[e],a.labels[n],r)}),a.bargroups[a.categories[e]].attr("transform","translate("+e*a.axes.hor.scale.rangeBand()/n+","+a.height()+") scale(1,-1)")},t.DonutGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=e.categories[0];var n=t.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(r.radius*r.config.donut.factor).outerRadius(r.radius),s=d3.layout.pie();r.chart.data(n),r.arcs=r.chart.selectAll("g.arc").data(s).enter().append("g").classed(t.constants.classes.arc+t.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(e,a){return t.util.getColorBand(r.config,a)}).style("stroke",r.config.donut.strokecolor).style("stroke-width",r.config.donut.strokewidth).on("mouseover",t.effects.donut.mouseover(r.center,o,r.config)).on("mouseout",t.effects.donut.mouseout(r.center,r.config)),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.donut.fontfill:"none").style("font-family",r.config.donut.fontfamily).style("font-size",r.config.donut.fontsize).style("font-weight",r.config.donut.fontweight).style("font-variant",r.config.donut.fontvariant).text(function(e){return t.util.getLabelValue(r,e)}),r.arcs.append("svg:title").text(function(e,a){return t.util.getTooltipText(r,r.category,r.labels[a],e)})},t.DonutGraph.prototype=t.util.inherits(t.Graph),t.DonutGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,this},t.LineGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.linegroups={},r.dataset=t.util.getDataArray(r.graphdef);var n,o,s,i=r.categories.length,l=r.labels;for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(l),s=0;i>s;s+=1)o=r.chart.append("g").classed("cg-"+t.util.formatClassName(r.categories[s]),!0).append("g").classed("cge-"+t.util.formatClassName(r.categories[s]),!0).datum(r.dataset[s]),n={path:o,func:void 0},r["draw"+r.config.graph.orientation+"Lines"](n,s),r.linegroups[r.categories[s]]=n;r.finalize()},t.LineGraph.prototype=t.util.inherits(t.Graph),t.LineGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,t.config.scale.ordinality=0,this},t.LineGraph.prototype.drawHorizontalLines=function(e,a){var r=this,n=r.axes,o=(r.config,t.util.getColorBand(r.config,a));return r.axes.ver.scale.rangePoints([0,r.height()]),e.func=d3.svg.line().x(function(t){return n.hor.scale(t.value)}).y(function(t){return n.ver.scale(t.name)+n.ver.scale.rangeBand()/2}).interpolate(t.config.line.interpolation),e.path.append("path").classed("cr-"+t.util.formatClassName(r.categories[a]),!0).attr("d",e.func).style("fill","none").style("stroke",o).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(3*r.config.effects.duration).delay(2*a*r.config.effects.duration).style("stroke-opacity",1).call(t.util.endAll,function(e,n){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",t.effects.line.mouseover(r,a)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",t.effects.line.mouseout(r,a)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",t.effects.line.mouseover(r,a)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",t.effects.line.mouseout(r,a))}),r.config.line.showcircles&&e.path.selectAll("circle").data(r.dataset[a]).enter().append("circle").classed("cr-"+t.util.formatClassName(r.categories[a]),!0).attr("cx",e.func.x()).attr("cy",e.func.y()).attr("r",3.5).style("fill",o).style("fill-opacity",.6).style("stroke","#fff").append("svg:title").text(function(e,n){return t.util.getTooltipText(r,r.categories[a],r.labels[n],e)}),e.path.selectAll("text").data(r.dataset[a]).enter().append("text").attr("x",function(t){return n.hor.scale(t.value)}).attr("y",function(t){return n.ver.scale(t.name)+n.ver.scale.rangeBand()/2}).attr("dx",10).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+t.util.formatClassName(r.categories[a]),!0).style("fill",r.config.label.showlabel?t.util.getColorBand(r.config,a):"none").style("font-family",r.config.bar.fontfamily).style("font-size",r.config.bar.fontsize).style("font-weight",r.config.bar.fontweight).text(function(e){return t.util.getLabelValue(r,e)}),this},t.LineGraph.prototype.drawVerticalLines=function(e,a){var r=this,n=r.axes,o=(r.config,t.util.getColorBand(r.config,a));return r.axes.hor.scale.rangePoints([0,r.width()]),e.func=d3.svg.line().x(function(t){return n.hor.scale(t.name)+n.hor.scale.rangeBand()/2}).y(function(t){return n.ver.scale(t.value)}).interpolate(t.config.line.interpolation),e.path.append("path").attr("d",e.func).classed("cr-"+t.util.formatClassName(r.categories[a]),!0).style("fill","none").style("stroke",o).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(r.config.effects.duration).delay(2*a*r.config.effects.duration).style("stroke-opacity",1).call(t.util.endAll,function(e,n){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",t.effects.line.mouseover(r,a)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",t.effects.line.mouseout(r,a)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",t.effects.line.mouseover(r,a)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",t.effects.line.mouseout(r,a))}),r.config.line.showcircles&&e.path.selectAll("circle").data(r.dataset[a]).enter().append("circle").attr("cx",e.func.x()).attr("cy",e.func.y()).attr("r",3.5).classed("cr-"+t.util.formatClassName(r.categories[a]),!0).style("fill",o).style("fill-opacity",.2).style("stroke","#fff").append("svg:title").text(function(e,n){return t.util.getTooltipText(r,r.categories[a],r.labels[n],e)}),e.path.selectAll("text").data(r.dataset[a]).enter().append("text").attr("x",function(t){return n.hor.scale(t.name)+n.hor.scale.rangeBand()/2}).attr("y",function(t){return n.ver.scale(t.value)-20}).attr("dx",0).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(r.categories[a]),!0).style("fill",r.config.label.showlabel?t.util.getColorBand(r.config,a):"none").style("font-family",r.config.bar.fontfamily).style("font-size",r.config.bar.fontsize).style("font-weight",r.config.bar.fontweight).text(function(e){return t.util.getLabelValue(r,e)}),this},t.PercentAreaGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init();{var n=d3.layout.stack().offset("zero")(r.categories.map(function(t){return e.dataset[t].map(function(t){return{x:t.name,y:+t.value}})})),o=r.labels;r.categories}r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(o),r.areagroup=r.chart.selectAll("g.areagroup").data(n).enter().append("g").attr("class",function(e,a){return t.util.getClassName(this,"cge-"+r.categories[a])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize(!0)},t.PercentAreaGraph.prototype=t.util.inherits(t.Graph),t.PercentAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="percent",this},t.PercentAreaGraph.prototype.drawHorizontalArea=function(){var e=this,a=e.axes,r=e.categories,n=e.config,o=t.util.getSumUpArray(e.graphdef);a.ver.scale.rangePoints([0,e.height()]);for(var s=0;s<r.length;s+=1)t.effects.area.mouseover(e,s),t.effects.area.mouseout(e,s);e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.area+t.util.formatClassName(r[a]))}).style("fill",function(e,a){return t.util.getColorBand(n,a)}).attr("d",d3.svg.area().y(function(t){return a.ver.scale(t.x)+a.ver.scale.rangeBand()/2}).x0(function(e,r){return a.hor.scale(t.util.getPercentage(e.y0,o[r]))}).x1(function(e,r){return a.hor.scale(t.util.getPercentage(e.y0+e.y,o[r]))}).interpolate(e.config.area.interpolation)).on("mouseover",function(t,a){e.effects[r[a]].mouseover()}).on("mouseout",function(t,a){e.effects[r[a]].mouseout()}),e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.line+t.util.formatClassName(r[a]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return a.ver.scale(t.x)+a.ver.scale.rangeBand()/2}).x(function(e,r){return a.hor.scale(t.util.getPercentage(e.y0+e.y,o[r]))}).interpolate(e.config.area.interpolation))},t.PercentAreaGraph.prototype.drawVerticalArea=function(){var e=this,a=e.axes,r=e.categories,n=e.config,o=t.util.getSumUpArray(e.graphdef);a.hor.scale.rangePoints([0,e.width()]);for(var s=0;s<r.length;s+=1)t.effects.area.mouseover(e,s),t.effects.area.mouseout(e,s);e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.area+t.util.formatClassName(r[a]))}).style("fill",function(e,a){return t.util.getColorBand(n,a)}).attr("d",d3.svg.area().x(function(t){return a.hor.scale(t.x)+a.hor.scale.rangeBand()/2}).y0(function(e,r){return a.ver.scale(t.util.getPercentage(e.y0,o[r]))}).y1(function(e,r){return a.ver.scale(t.util.getPercentage(e.y0+e.y,o[r]))}).interpolate(e.config.area.interpolation)).on("mouseover",function(t,a){e.effects[r[a]].mouseover()}).on("mouseout",function(t,a){e.effects[r[a]].mouseout()}),e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.line+t.util.formatClassName(r[a]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t,e){return a.hor.scale(t.x)+a.hor.scale.rangeBand()/2}).y(function(e,r){return a.ver.scale(t.util.getPercentage(e.y0+e.y,o[r]))}).interpolate(e.config.area.interpolation))},t.PercentBarGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.bargroups=[];var n,o,s,i,l,c=r.labels,f=c.map(function(t){return 0}),u=c.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(c),s=0,i=r.categories.length;i>s;s+=1)l=t.util.getColorBand(r.config,s),n=r.chart.append("g").classed("cg-"+r.categories[s],!0),o=n.selectAll("g").data(r.graphdef.dataset[r.categories[s]]).enter().append("g").classed("cge-"+t.util.formatClassName(r.categories[s]),!0),r["draw"+t.util.getPascalCasedName(r.config.graph.orientation)+"Bars"](o,f,u,s),"Vertical"===r.config.graph.orientation&&n.attr("transform","translate(0,"+2*r.height()+") scale(1,-1)"),r.bargroups.push(n);r.finalize()},t.PercentBarGraph.prototype=t.util.inherits(t.Graph),t.PercentBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="percent",t.config.scale.ordinality=0,this},t.PercentBarGraph.prototype.drawHorizontalBars=function(e,a,r,n){var o=this,s=this.axes,i=t.util.getColorBand(this.config,n),l=(this.config,t.util.getSumUpArray(this.graphdef));e.append("rect").attr("height",s.ver.scale.rangeBand()).attr("width",0).attr("x",function(e,r){var n=s.hor.scale(t.util.getPercentage(a[r],l[r]));return a[r]+=e.value,n}).attr("y",function(t){return s.ver.scale(t.name)}).classed("cr-"+t.util.formatClassName(o.categories[n]),!0).style("stroke","none").style("fill",i).transition().duration(t.config.effects.duration).delay(n*t.config.effects.duration).attr("width",function(e,a){return s.hor.scale(t.util.getPercentage(e.value,l[a]))}).call(t.util.endAll,function(e,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(o,n,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(o,n,o.config.effects.textcolor))}),e.append("text").attr("y",function(t){return s.ver.scale(t.name)+s.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+t.util.formatClassName(o.categories[n]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(e,r){return s.hor.scale(t.util.getPercentage(a[r],l[r]))>15?String(Math.round(t.util.getPercentage(e.value,l[r]))):null}).transition().duration(t.config.effects.duration).delay(n*t.config.effects.duration).attr("x",function(e,a){return r[a]+=e.value,s.hor.scale(t.util.getPercentage(r[a],l[a]))-5})},t.PercentBarGraph.prototype.drawVerticalBars=function(e,a,r,n){var o=this,s=this.height(),i=this.axes,l=t.util.getColorBand(this.config,n),c=(this.config,t.util.getSumUpArray(this.graphdef));e.append("rect").attr("height",0).attr("width",i.hor.scale.rangeBand()).attr("x",function(t){return i.hor.scale(t.name)}).attr("y",function(e,r){var n=i.ver.scale(t.util.getPercentage(a[r],c[r]));return a[r]-=e.value,n}).classed("cr-"+t.util.formatClassName(o.categories[n]),!0).style("stroke","none").style("fill",l).transition().duration(t.config.effects.duration).delay(n*t.config.effects.duration).attr("height",function(e,a){return s-i.ver.scale(t.util.getPercentage(e.value,c[a]))}).call(t.util.endAll,function(e,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(o,n,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(o,n,o.config.effects.textcolor))}),e.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return i.hor.scale(t.name)+i.hor.scale.rangeBand()/2}).attr("y",-s+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(o.categories[n]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(e,a){return s-i.ver.scale(t.util.getPercentage(e.value,c[a]))>15?String(Math.round(t.util.getPercentage(e.value,c[a]))):null}).transition().duration(t.config.effects.duration).delay(n*t.config.effects.duration).attr("y",function(e,a){return r[a]+=e.value,-(2*s-i.ver.scale(t.util.getPercentage(r[a],c[a])))+5})},t.PieGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=e.categories[0];var n=t.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(0).outerRadius(r.radius),s=d3.layout.pie();r.chart.data(n),r.arcs=r.chart.selectAll("g.arc").data(s).enter().append("g").classed(t.constants.classes.arc+t.util.formatClassName(r.category),!0).attr("class",function(e,a){return t.util.getClassName(this,"cge-"+r.labels[a])}).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(e,a){return t.util.getColorBand(r.config,a)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth).on("mouseover",t.effects.pie.mouseover(r,r.center,o,r.config)).on("mouseout",t.effects.pie.mouseout(r,r.center,r.config)),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.donut.fontfill:"none").style("font-family",r.config.pie.fontfamily).style("font-size",r.config.pie.fontsize).style("font-weight",r.config.pie.fontweight).style("font-variant",r.config.pie.fontvariant).text(function(e){return t.util.getLabelValue(r,e)}),r.arcs.append("svg:title").text(function(e,a){return t.util.getTooltipText(r,r.category,r.labels[a],e)})},t.PieGraph.prototype=t.util.inherits(t.Graph),t.PieGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,t.config.legend.legendtype="labels",this},t.PolarAreaGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.maxRadius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=r.categories[0];for(var n=t.util.getCategoryData(r.graphdef,[r.category]),o=n[0].map(function(t,e){return t}),s=d3.layout.pie().value(function(t){return r.max()/n[0].length}),i=[],l=d3.svg.arc().innerRadius(0).outerRadius(function(t,e){return o[e]*r.maxRadius/r.max()}),c=1;c<=r.config.axis.ticks;c++)i[c]=r.maxRadius/r.config.axis.ticks*c;r.chart.data(n),r.arcs=r.chart.selectAll("g.arc").data(s).enter().append("g").classed(t.constants.classes.arc+t.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",l).style("fill",function(e,a){return t.util.getColorBand(r.config,a)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth),r.arcs.append("svg:title").text(function(e,a){return t.util.getTooltipText(r,r.category,r.labels[a],e)}),r.chart.selectAll("."+t.constants.classes.circleticks).data(i).enter().append("svg:g").classed(t.constants.classes.circleticks,!0).append("svg:circle").attr("r",function(t,e){return t}).style("stroke",r.config.axis.strokecolor).style("opacity",r.config.axis.opacity).style("fill","none").attr("transform","translate("+r.center.x+","+r.center.y+")")},t.PolarAreaGraph.prototype=t.util.inherits(t.Graph),t.PolarAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!1,this},t.StackedAreaGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init();var n=d3.layout.stack().offset(r.config.area.offset)(r.categories.map(function(t){return e.dataset[t].map(function(t){return{x:t.name,y:+t.value}})}));r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels.map(function(t){return t})),r.areagroup=r.chart.append("g").selectAll("g").data(n).enter().append("g").attr("class",function(e,a){return t.util.getClassName(this,"cge-"+r.categories[a])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize()},t.StackedAreaGraph.prototype=t.util.inherits(t.Graph),t.StackedAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!0,this},t.StackedAreaGraph.prototype.drawHorizontalArea=function(){var e=this,a=e.axes,r=e.categories,n=e.config;a.ver.scale.rangePoints([0,e.height()]);for(var o=0;o<r.length;o+=1)t.effects.area.mouseover(e,o),t.effects.area.mouseout(e,o);return e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.area+r[a])}).style("fill",function(e,a){return t.util.getColorBand(n,a)}).attr("d",d3.svg.area().y(function(t){return a.ver.scale(t.x)+a.ver.scale.rangeBand()/2}).x0(function(t){return a.hor.scale(t.y0)}).x1(function(t){return a.hor.scale(t.y0+t.y)}).interpolate(e.config.area.interpolation)).on("mouseover",function(t,a){e.effects[r[a]].mouseover()}).on("mouseout",function(t,a){e.effects[r[a]].mouseout()}),e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.line+r[a])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return a.ver.scale(t.x)+a.ver.scale.rangeBand()/2}).x(function(t){return a.hor.scale(t.y0+t.y)}).interpolate(e.config.area.interpolation)),e},t.StackedAreaGraph.prototype.drawVerticalArea=function(){var e=this,a=e.axes,r=e.categories,n=e.config;a.hor.scale.rangePoints([0,e.width()]);for(var o=0;o<r.length;o+=1)t.effects.area.mouseover(e,o),t.effects.area.mouseout(e,o);return e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.area+r[a])}).style("fill",function(e,a){return t.util.getColorBand(n,a)}).attr("d",d3.svg.area().x(function(t){return a.hor.scale(t.x)+a.hor.scale.rangeBand()/2}).y0(function(t){return a.ver.scale(t.y0)}).y1(function(t){return a.ver.scale(t.y0+t.y)}).interpolate(e.config.area.interpolation)).on("mouseover",function(t,a){e.effects[r[a]].mouseover()}).on("mouseout",function(t,a){e.effects[r[a]].mouseout()}),e.areagroup.append("path").attr("class",function(e,a){return t.util.getClassName(this,t.constants.classes.line+r[a])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t){return a.hor.scale(t.x)+a.hor.scale.rangeBand()/2}).y(function(t){return a.ver.scale(t.y0+t.y)}).interpolate(e.config.area.interpolation)),e},t.StackedBarGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.bargroups={};var n,o,s=r.labels,i=s.map(function(t){return 0}),l=s.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(s),n=0,o=r.categories.length;o>n;n+=1)r.bargroups[r.categories[n]]=r.chart.append("g").classed("cg-"+t.util.formatClassName(r.categories[n]),!0),r["draw"+r.config.graph.orientation+"Bars"](n,i,l);r.finalize()},t.StackedBarGraph.prototype=t.util.inherits(t.Graph),t.StackedBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!0,this},t.StackedBarGraph.prototype.drawHorizontalBars=function(e,a,r){var n=this,o=this.axes,s=t.util.getColorBand(this.config,e),i=this.config,l=this.bargroups[this.categories[e]],c=l.selectAll("g").data(this.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);c.append("rect").attr("height",o.ver.scale.rangeBand()).attr("width",0).attr("x",function(t,e){var r=o.hor.scale(a[e]);return a[e]+=t.value,r}).attr("y",function(t){return o.ver.scale(t.name)}).classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("stroke","none").style("fill",s).transition().duration(t.config.effects.duration).delay(e*t.config.effects.duration).attr("width",function(t,e){return o.hor.scale(a[e])-o.hor.scale(a[e]-t.value)}).each("end",function(a,r){d3.select(this).on("mouseover",t.effects.bar.mouseover(n,e,n.config.effects.textcolor)),d3.select(this).on("mouseout",t.effects.bar.mouseout(n,e,n.config.effects.textcolor))}),c.append("text").attr("y",function(t){return o.ver.scale(t.name)+o.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?n.config.effects.textcolor:"none").style("font-family",i.bar.fontfamily).style("font-size",i.bar.fontsize).style("font-weight",i.bar.fontweight).text(function(e){return o.hor.scale(e.value)>15?t.util.getLabelValue(n,e):null}).transition().duration(t.config.effects.duration).delay(e*t.config.effects.duration).attr("x",function(t,e){return r[e]+=t.value,o.hor.scale(r[e])-5}),c.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)})},t.StackedBarGraph.prototype.drawVerticalBars=function(e,a,r){var n=this,o=this.height(),s=this.axes,i=t.util.getColorBand(this.config,e),l=this.config,c=this.bargroups[n.categories[e]],f=c.selectAll("g").data(this.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);f.append("rect").attr("height",0).attr("width",s.hor.scale.rangeBand()).attr("x",function(t){return s.hor.scale(t.name)}).attr("y",function(t,e){var r=s.ver.scale(a[e]);return a[e]-=t.value,r}).classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("stroke","none").style("fill",i).transition().duration(t.config.effects.duration).delay(e*t.config.effects.duration).attr("height",function(t,e){return-(s.ver.scale(-a[e])-s.ver.scale(-a[e]-t.value))}).each("end",function(a,r){d3.select(this).on("mouseover",t.effects.bar.mouseover(n,e,n.config.effects.textcolor)),d3.select(this).on("mouseout",t.effects.bar.mouseout(n,e,n.config.effects.textcolor))}),f.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return s.hor.scale(t.name)+s.hor.scale.rangeBand()/2}).attr("y",-o+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?n.config.effects.textcolor:"none").style("font-family",l.bar.fontfamily).style("font-size",l.bar.fontsize).style("font-weight",l.bar.fontweight).text(function(e){return o-s.ver.scale(e.value)>15?t.util.getLabelValue(n,e):null}).transition().duration(t.config.effects.duration).delay(e*t.config.effects.duration).attr("y",function(t,e){return r[e]+=t.value,-(2*o-s.ver.scale(r[e]))+5}),f.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)}),c.attr("transform","translate(0,"+2*this.height()+") scale(1,-1)")},t.StepUpBarGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),this.bargroups={};var n,o=r.categories.length,s=r.labels.map(function(t){return 0}),i=r.labels.map(function(t){return 0});for(r.axes["Horizontal"===this.config.graph.orientation?"ver":"hor"].scale.domain(this.labels),n=0;o>n;n+=1)r.bargroups[r.categories[n]]=this.chart.append("g").classed("cg-"+t.util.formatClassName(r.categories[n]),!0),r["draw"+r.config.graph.orientation+"Bars"](n,s,i);r.finalize()},t.StepUpBarGraph.prototype=t.util.inherits(t.Graph),t.StepUpBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup=!0,this},t.StepUpBarGraph.prototype.drawHorizontalBars=function(e,a,r){var n=this,o=n.categories.length,s=t.util.getColorBand(n.config,e),i=n.bargroups[n.categories[e]],l=i.selectAll("g").data(n.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);l.append("rect").attr("height",n.axes.ver.scale.rangeBand()/o).attr("width",0).attr("x",function(t,e){var r=n.axes.hor.scale(a[e]);return a[e]+=t.value,r}).attr("y",function(t){return n.axes.ver.scale(t.name)}).classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("stroke","none").style("fill",s).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("width",function(t,e){return n.axes.hor.scale(a[e])-n.axes.hor.scale(a[e]-t.value)}).call(t.util.endAll,function(a,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(n,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(n,e))}),l.append("text").attr("y",function(t){return n.axes.ver.scale(t.name)+n.axes.ver.scale.rangeBand()/o/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?t.util.getColorBand(n.config,e):"none").style("font-family",n.config.bar.fontfamily).style("font-size",n.config.bar.fontsize).style("font-weight",n.config.bar.fontweight).text(function(e){return t.util.getLabelValue(n,e)}).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("x",function(t,e){return r[e]+=t.value,n.axes.hor.scale(r[e])}),l.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)}),i.attr("transform","translate(0,"+e*n.axes.ver.scale.rangeBand()/o+")")},t.StepUpBarGraph.prototype.drawVerticalBars=function(e,a,r){var n=this,o=n.categories.length,s=t.util.getColorBand(n.config,e),i=n.bargroups[n.categories[e]],l=i.selectAll("g").data(n.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);l.append("rect").attr("height",0).attr("width",n.axes.hor.scale.rangeBand()/o).attr("x",function(t){return n.axes.hor.scale(t.name)}).attr("y",function(t,e){var r=n.axes.ver.scale(a[e]);return a[e]-=t.value,r}).classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("stroke","none").style("fill",s).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("height",function(t,e){return-(n.axes.ver.scale(-a[e])-n.axes.ver.scale(-a[e]-t.value))}).call(t.util.endAll,function(a,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(n,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(n,e));

}),l.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return n.axes.hor.scale(t.name)+n.axes.hor.scale.rangeBand()/o/2}).attr("y",-n.height()-10).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?t.util.getColorBand(n.config,e):"none").style("font-family",n.config.bar.fontfamily).style("font-size",n.config.bar.fontsize).style("font-weight",n.config.bar.fontweight).text(function(e){return t.util.getLabelValue(n,e)}).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("y",function(t,e){return r[e]+=t.value,-(2*n.height()-n.axes.ver.scale(r[e]))-10}),l.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)}),i.attr("transform","translate("+e*n.axes.hor.scale.rangeBand()/o+","+2*n.height()+") scale(1,-1)")},t.StepupWaterfallGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);var n,o,s=r.categories.length,i=r.labels.map(function(t){return 0}),l=r.labels.map(function(t){return 0});for(n=0;s>n;n+=1)o=r.categories[n],r.bargroups[o]=r.chart.append("g").classed("cg-"+t.util.formatClassName(o),!0),r["draw"+r.config.graph.orientation+"Bars"](n,i,l);r.finalize()},t.StepupWaterfallGraph.prototype=t.util.inherits(t.Graph),t.StepupWaterfallGraph.prototype.setDefaults=function(){return this.graphdef.stepup=!0,this},t.StepupWaterfallGraph.prototype.drawHorizontalBars=function(e,a,r){var n=this,o=n.categories.length,s=t.util.getColorBand(n.config,e),i=n.bargroups[n.categories[e]],l=i.selectAll("g").data(n.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);l.append("rect").attr("height",n.axes.ver.scale.rangeBand()/o).attr("width",0).attr("x",function(t,e){var r=t.value<0?a[e]+t.value:a[e];return a[e]+=t.value,n.axes.hor.scale(r)}).attr("y",function(t){return n.axes.ver.scale(t.name)}).classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("stroke","none").style("fill",s).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("width",function(t){return n.axes.hor.scale(Math.abs(t.value))}).call(t.util.endAll,function(a,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(n,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(n,e))}),l.append("text").attr("y",function(t){return n.axes.ver.scale(t.name)+n.axes.ver.scale.rangeBand()/o/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?t.util.getColorBand(n.config,e):"none").style("font-family",n.config.bar.fontfamily).style("font-size",n.config.bar.fontsize).style("font-weight",n.config.bar.fontweight).text(function(e){return t.util.getLabelValue(n,e)}).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("x",function(t,e){var a=t.value<0?r[e]:r[e]+t.value;return r[e]+=t.value,n.axes.hor.scale(a)}),l.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)}),i.attr("transform","translate(0,"+e*n.axes.ver.scale.rangeBand()/o+")")},t.StepupWaterfallGraph.prototype.drawVerticalBars=function(e,a,r){var n=this,o=t.util.getColorBand(this.config,e),s=n.categories.length,i=n.bargroups[n.categories[e]].selectAll("g").data(n.graphdef.dataset[n.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(n.categories[e]),!0);i.append("rect").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).attr("height",0).attr("width",0).attr("x",function(t){return n.axes.hor.scale(t.name)}).attr("y",function(t,e){var r=t.value<0?a[e]+t.value:a[e];return a[e]+=t.value,n.height()-n.axes.ver.scale(r)}).style("stroke",n.config.bar.strokecolor).style("fill",o).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("height",function(t){return n.height()-n.axes.ver.scale(Math.abs(t.value))}).attr("width",n.axes.hor.scale.rangeBand()/s-2).call(t.util.endAll,function(a,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(n,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(n,e))}),i.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return n.axes.hor.scale(t.name)+n.axes.hor.scale.rangeBand()/s/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(n.categories[e]),!0).style("fill",n.config.label.showlabel?t.util.getColorBand(n.config,e):"none").style("font-family",n.config.bar.fontfamily).style("font-size",n.config.bar.fontsize).style("font-weight",n.config.bar.fontweight).text(function(e){return t.util.getLabelValue(n,e)}).transition().duration(n.config.effects.duration).delay(e*n.config.effects.duration).attr("y",function(t,e){r[e]+=t.value;var a=t.value<0?r[e]-t.value:r[e];return-(n.height()-n.axes.ver.scale(a))-10}),i.append("svg:title").text(function(a,r){return t.util.getTooltipText(n,n.categories[e],n.labels[r],a)}),n.bargroups[n.categories[e]].attr("transform","translate("+e*n.axes.hor.scale.rangeBand()/s+","+n.height()+") scale(1,-1)")},t.Table=function(){this.caption=void 0,this.position=void 0,this.graphdef=void 0,this.table=void 0,this.header=void 0,this.body=void 0,this.bodyrows={}},t.Table.prototype.init=function(e,a){this.graphdef=e,this.config=t.util.extend({},a),this.position=this.config.meta.pos||"body",this.table=d3.select(this.position).append("table").classed(this.config.table.tableclass,!0),this.header=this.table.append("thead").classed(this.config.table.headerclass,!0),this.body=this.table.append("tbody").classed(this.config.table.bodyclass,!0),this.footer=this.table.append("tfoot").classed(this.config.table.footerclass,!0)},t.Table.prototype.finalize=function(){},t.TableGraph=function(e,a){t.Table.apply(this,[e]),this.init(e,a),"Horizontal"===this.config.graph.orientation?this.setHorTable():this.setVerTable(),this.finalize()},t.TableGraph.prototype=t.util.inherits(t.Table),t.TableGraph.prototype.setHorTable=function(){var e=this.graphdef.categories,a=t.util.getTabularArray(this.graphdef);e.unshift(""),this.header.append("tr").selectAll("td").data(e).enter().append("td").text(function(t){return t}),e.shift(),this.bodyrows=this.body.selectAll("tr").data(a).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t,e){return a[e]}).enter().append("td").attr("class",function(t,e){var a=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+a}).text(function(t){return t})},t.TableGraph.prototype.setVerTable=function(){var e=t.util.getLabelArray(this.graphdef),a=this.graphdef.dataset;e.unshift(""),this.header.append("tr").selectAll("td").data(e).enter().append("td").text(function(t){return t}),e.shift(),this.bodyrows=this.body.selectAll("tr").data(this.graphdef.categories).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t){var e,r,n=[];for(n.push(t),e=0,r=a[t].length;r>e;e+=1)n.push(a[t][e].value);return n}).enter().append("td").attr("class",function(t,e){var a=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+a}).text(function(t){return t})},t.WaterfallGraph=function(e,a){var r=this;t.Graph.call(r,e,a).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);{var n;r.categories.length}n=r.categories[0],r.bargroups[n]=r.chart.append("g").classed("cg-"+t.util.formatClassName(n),!0),r["draw"+r.config.graph.orientation+"Bars"](0),r.finalize()},t.WaterfallGraph.prototype=t.util.inherits(t.Graph),t.WaterfallGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="waterfall",t.config.legend.showlegends=!1,this},t.WaterfallGraph.prototype.drawHorizontalBars=function(e){var a=this,r=a.categories.length,n=t.util.getColorBand(a.config,e),o=a.bargroups[a.categories[e]],s=0,i=0,l=o.selectAll("g").data(a.graphdef.dataset[a.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(a.categories[e]),!0);l.append("rect").attr("height",a.axes.ver.scale.rangeBand()/r-2).attr("width",0).attr("x",function(t,e){var r=t.value<0?s+t.value:s;return s+=t.value,a.axes.hor.scale(r)}).attr("y",function(t){return a.axes.ver.scale(t.name)}).classed("cr-"+t.util.formatClassName(a.categories[e]),!0).style("stroke","none").style("fill",n).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("width",function(t){return a.axes.hor.scale(Math.abs(t.value))}).call(t.util.endAll,function(r,n){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(a,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(a,e))}),l.append("text").attr("y",function(t){return a.axes.ver.scale(t.name)+a.axes.ver.scale.rangeBand()/r/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+t.util.formatClassName(a.categories[e]),!0).style("fill",a.config.label.showlabel?t.util.getColorBand(a.config,e):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(e){return t.util.getLabelValue(a,e)}).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("x",function(t,e){var r=t.value<0?i:i+t.value;return i+=t.value,a.axes.hor.scale(r)}),l.append("svg:title").text(function(r,n){return t.util.getTooltipText(a,a.categories[e],a.labels[n],r)}),o.attr("transform","translate(0,"+e*a.axes.ver.scale.rangeBand()/r+")")},t.WaterfallGraph.prototype.drawVerticalBars=function(e){var a=this,r=t.util.getColorBand(this.config,e),n=a.categories.length,o=0,s=0,i=a.bargroups[a.categories[e]].selectAll("g").data(a.graphdef.dataset[a.categories[e]]).enter().append("g").classed("cge-"+t.util.formatClassName(a.categories[e]),!0);i.append("rect").classed("cr-"+t.util.formatClassName(a.categories[e]),!0).attr("height",0).attr("width",0).attr("x",function(t){return a.axes.hor.scale(t.name)}).attr("y",function(t){var e=t.value<0?o+t.value:o;return o+=t.value,a.height()-a.axes.ver.scale(e)}).style("stroke",a.config.bar.strokecolor).style("fill",r).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("height",function(t){return a.height()-a.axes.ver.scale(Math.abs(t.value))}).attr("width",a.axes.hor.scale.rangeBand()/n-2).call(t.util.endAll,function(r,n){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",t.effects.bar.mouseover(a,e)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",t.effects.bar.mouseout(a,e))}),i.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return a.axes.hor.scale(t.name)+a.axes.hor.scale.rangeBand()/n/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+t.util.formatClassName(a.categories[e]),!0).style("fill",a.config.label.showlabel?t.util.getColorBand(a.config,e):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(e){return t.util.getLabelValue(a,e)}).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("y",function(t){s+=t.value;var e=t.value<0?s-t.value:s;return-(a.height()-a.axes.ver.scale(e))-10}),i.append("svg:title").text(function(r,n){return t.util.getTooltipText(a,a.categories[e],a.labels[n],r)}),a.bargroups[a.categories[e]].attr("transform","translate("+e*a.axes.hor.scale.rangeBand()/n+","+a.height()+") scale(1,-1)")},{chart:t.chart}}();